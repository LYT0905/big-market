24-09-03.20:09:15.038 [main            ] INFO  RaffleStrategyControllerTest - Starting RaffleStrategyControllerTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 40344 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-09-03.20:09:15.039 [main            ] INFO  RaffleStrategyControllerTest - The following 1 profile is active: "dev"
24-09-03.20:09:16.826 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-09-03.20:09:16.832 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-09-03.20:09:16.908 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 0 Redis repository interfaces.
24-09-03.20:09:17.488 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'stringToNoneShardingStrategyConfigurationConverter' of type [org.apache.shardingsphere.spring.boot.converter.StringToNoneShardingStrategyConfigurationConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:09:17.504 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.shardingsphere-org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration' of type [org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:09:17.831 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration' of type [org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$65b678bd] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:09:18.858 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-09-03.20:10:27.110 [main            ] ERROR HikariPool             - HikariPool-1 - Exception during pool initialization.
java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:906)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:831)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:456)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:115)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.apache.shardingsphere.infra.database.type.DatabaseTypeRecognizer.getDatabaseType(DatabaseTypeRecognizer.java:53)
	at org.apache.shardingsphere.infra.database.type.DatabaseTypeRecognizer.getDatabaseType(DatabaseTypeRecognizer.java:44)
	at org.apache.shardingsphere.infra.rule.builder.schema.SchemaRulesBuilder.buildRules(SchemaRulesBuilder.java:69)
	at org.apache.shardingsphere.mode.manager.standalone.StandaloneContextManagerBuilder.build(StandaloneContextManagerBuilder.java:76)
	at org.apache.shardingsphere.driver.jdbc.core.datasource.ShardingSphereDataSource.createContextManager(ShardingSphereDataSource.java:75)
	at org.apache.shardingsphere.driver.jdbc.core.datasource.ShardingSphereDataSource.<init>(ShardingSphereDataSource.java:61)
	at org.apache.shardingsphere.driver.api.ShardingSphereDataSourceFactory.createDataSource(ShardingSphereDataSourceFactory.java:79)
	at org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration.shardingSphereDataSource(ShardingSphereAutoConfiguration.java:93)
	at org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$65b678bd.CGLIB$shardingSphereDataSource$3(<generated>)
	at org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$65b678bd$$FastClassBySpringCGLIB$$e37231fb.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$65b678bd.shardingSphereDataSource(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:544)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:520)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:673)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:228)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:329)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:544)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:520)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:673)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:228)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:329)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeanByName(AbstractAutowireCapableBeanFactory.java:479)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:550)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:520)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:673)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:228)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:329)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:136)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:850)
	... 146 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 148 common frames omitted
24-09-03.20:10:27.114 [main            ] INFO  HikariDataSource       - HikariPool-2 - Starting...
24-09-03.20:10:50.465 [main            ] INFO  HikariDataSource       - HikariPool-2 - Start completed.
24-09-03.20:10:50.684 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-09-03.20:10:50.945 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-09-03.20:10:54.471 [main            ] INFO  Version                - Redisson 3.23.4
24-09-03.20:10:55.150 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:10:55.338 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:10:58.852 [main            ] INFO  StdSchedulerFactory    - Using default implementation for ThreadExecutor
24-09-03.20:10:58.871 [main            ] INFO  SchedulerSignalerImpl  - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
24-09-03.20:10:58.871 [main            ] INFO  QuartzScheduler        - Quartz Scheduler v.2.3.2 created.
24-09-03.20:10:58.872 [main            ] INFO  RAMJobStore            - RAMJobStore initialized.
24-09-03.20:10:58.873 [main            ] INFO  QuartzScheduler        - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'quartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

24-09-03.20:10:58.873 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler 'quartzScheduler' initialized from an externally provided properties instance.
24-09-03.20:10:58.873 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler version: 2.3.2
24-09-03.20:10:58.873 [main            ] INFO  QuartzScheduler        - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@35b5056e
24-09-03.20:10:59.041 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-09-03.20:10:59.188 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [8.138.41.137:5672]
24-09-03.20:10:59.375 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6b71fded:0/SimpleConnection@649a76c1 [delegate=amqp://admin@8.138.41.137:5672/, localPort= 65442]
24-09-03.20:10:59.745 [main            ] INFO  SchedulerFactoryBean   - Starting Quartz Scheduler now
24-09-03.20:10:59.745 [main            ] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED started.
24-09-03.20:10:59.765 [main            ] INFO  RaffleStrategyControllerTest - Started RaffleStrategyControllerTest in 105.287 seconds (JVM running for 106.874)
24-09-03.20:11:00.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-09-03.20:11:00.065 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-09-03.20:11:00.132 [main            ] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:lyt activityId:101
24-09-03.20:11:00.982 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Logic SQL: select topic,
               user_id,
               message,
               message_id
        from task where state = 'fail' or(state = 'create' and now() - update_time > 60000000000000) limit 10;;
24-09-03.20:11:00.982 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id
        from raffle_activity where activity_id = ?;
24-09-03.20:11:00.982 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:11:00.982 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional[org.apache.shardingsphere.sql.parser.sql.common.segment.dml.pagination.limit.LimitSegment@68f74ea1], lock=Optional.empty, window=Optional.empty)
24-09-03.20:11:00.982 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select topic,
               user_id,
               message,
               message_id
, id AS ORDER_BY_DERIVED_0         from task where state = 'fail' or(state = 'create' and now() - update_time > 60000000000000) ORDER BY id ASC  limit 10;;
24-09-03.20:11:00.982 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id
        from raffle_activity where activity_id = ?; ::: [101]
24-09-03.20:11:00.982 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select topic,
               user_id,
               message,
               message_id
, id AS ORDER_BY_DERIVED_0         from task where state = 'fail' or(state = 'create' and now() - update_time > 60000000000000) ORDER BY id ASC  limit 10;;
24-09-03.20:11:01.123 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort,
               rule_models
        from strategy_award
        where strategy_id = ?
24-09-03.20:11:01.123 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:11:01.123 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort,
               rule_models
        from strategy_award
        where strategy_id = ? ::: [100004]
24-09-03.20:11:01.251 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            tree_id,
            rule_value
        from rule_tree_node
        where rule_key = 'rule_lock' and tree_id in
         (  
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         )
24-09-03.20:11:01.251 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:11:01.251 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            tree_id,
            rule_value
        from rule_tree_node
        where rule_key = 'rule_lock' and tree_id in
         (  
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         ) ::: [tree_lock, tree_lock, tree_lock, tree_lock, tree_lock]
24-09-03.20:11:01.401 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select day_count - day_count_surplus
        from raffle_activity_account_day
        where user_id = ?
          and activity_id = ?
          and `day` = ?;
24-09-03.20:11:01.401 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:11:01.401 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select day_count - day_count_surplus
        from raffle_activity_account_day_0
        where user_id = ?
          and activity_id = ?
          and `day` = ?; ::: [lyt, 101, 2024-09-03]
24-09-03.20:11:01.737 [main            ] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:lyt activityId:101 response: {"code":"0000","data":[{"awardId":100,"awardRuleLockCount":8,"awardTitle":"随机积分","isAwardUnlock":false,"sort":1,"waitUnlockCount":8},{"awardId":101,"awardRuleLockCount":8,"awardTitle":"10000积分","isAwardUnlock":false,"sort":2,"waitUnlockCount":8},{"awardId":102,"awardRuleLockCount":8,"awardTitle":"公仔一只","isAwardUnlock":false,"sort":3,"waitUnlockCount":8},{"awardId":103,"awardRuleLockCount":8,"awardTitle":"台灯一个","isAwardUnlock":false,"sort":4,"waitUnlockCount":8},{"awardId":104,"awardRuleLockCount":8,"awardTitle":"增加5次抽奖机会","isAwardUnlock":false,"sort":5,"waitUnlockCount":8}],"info":"成功"}
24-09-03.20:11:01.742 [main            ] INFO  RaffleStrategyControllerTest - 请求参数：{"activityId":101,"userId":"lyt"}
24-09-03.20:11:01.746 [main            ] INFO  RaffleStrategyControllerTest - 测试结果：{"code":"0000","data":[{"awardId":100,"awardRuleLockCount":8,"awardTitle":"随机积分","isAwardUnlock":false,"sort":1,"waitUnlockCount":8},{"awardId":101,"awardRuleLockCount":8,"awardTitle":"10000积分","isAwardUnlock":false,"sort":2,"waitUnlockCount":8},{"awardId":102,"awardRuleLockCount":8,"awardTitle":"公仔一只","isAwardUnlock":false,"sort":3,"waitUnlockCount":8},{"awardId":103,"awardRuleLockCount":8,"awardTitle":"台灯一个","isAwardUnlock":false,"sort":4,"waitUnlockCount":8},{"awardId":104,"awardRuleLockCount":8,"awardTitle":"增加5次抽奖机会","isAwardUnlock":false,"sort":5,"waitUnlockCount":8}],"info":"成功"}
24-09-03.20:11:01.785 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:11:01.806 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:11:01.806 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:11:02.675 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:11:02.796 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:11:02.798 [SpringApplicationShutdownHook] INFO  SchedulerFactoryBean   - Shutting down Quartz Scheduler
24-09-03.20:11:02.798 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutting down.
24-09-03.20:11:02.798 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:11:02.798 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutdown complete.
24-09-03.20:11:02.799 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:11:02.801 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:11:02.907 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-09-03.20:11:02.915 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-09-03.20:11:02.915 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown initiated...
24-09-03.20:11:02.920 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown completed.
24-09-03.20:14:38.185 [main            ] INFO  RaffleStrategyControllerTest - Starting RaffleStrategyControllerTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 33344 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-09-03.20:14:38.186 [main            ] INFO  RaffleStrategyControllerTest - The following 1 profile is active: "dev"
24-09-03.20:14:40.060 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-09-03.20:14:40.067 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-09-03.20:14:40.182 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73 ms. Found 0 Redis repository interfaces.
24-09-03.20:14:40.855 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'stringToNoneShardingStrategyConfigurationConverter' of type [org.apache.shardingsphere.spring.boot.converter.StringToNoneShardingStrategyConfigurationConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:14:40.875 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.shardingsphere-org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration' of type [org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:14:41.223 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration' of type [org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$21444c8e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:14:42.495 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-09-03.20:14:43.660 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-09-03.20:14:43.679 [main            ] INFO  HikariDataSource       - HikariPool-2 - Starting...
24-09-03.20:14:43.990 [main            ] INFO  HikariDataSource       - HikariPool-2 - Start completed.
24-09-03.20:14:46.462 [main            ] INFO  Version                - Redisson 3.23.4
24-09-03.20:14:47.068 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:14:47.218 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:14:50.214 [main            ] INFO  StdSchedulerFactory    - Using default implementation for ThreadExecutor
24-09-03.20:14:50.229 [main            ] INFO  SchedulerSignalerImpl  - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
24-09-03.20:14:50.229 [main            ] INFO  QuartzScheduler        - Quartz Scheduler v.2.3.2 created.
24-09-03.20:14:50.231 [main            ] INFO  RAMJobStore            - RAMJobStore initialized.
24-09-03.20:14:50.231 [main            ] INFO  QuartzScheduler        - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'quartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

24-09-03.20:14:50.231 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler 'quartzScheduler' initialized from an externally provided properties instance.
24-09-03.20:14:50.231 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler version: 2.3.2
24-09-03.20:14:50.231 [main            ] INFO  QuartzScheduler        - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@2026af0
24-09-03.20:14:50.400 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-09-03.20:14:50.528 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [8.138.41.137:5672]
24-09-03.20:14:50.693 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4823f3b8:0/SimpleConnection@20f1c8ed [delegate=amqp://admin@8.138.41.137:5672/, localPort= 49700]
24-09-03.20:14:50.980 [main            ] INFO  SchedulerFactoryBean   - Starting Quartz Scheduler now
24-09-03.20:14:50.980 [main            ] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED started.
24-09-03.20:14:50.999 [main            ] INFO  RaffleStrategyControllerTest - Started RaffleStrategyControllerTest in 13.335 seconds (JVM running for 14.55)
24-09-03.20:14:51.293 [main            ] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:lyt activityId:101
24-09-03.20:14:52.131 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id
        from raffle_activity where activity_id = ?;
24-09-03.20:14:52.131 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:14:52.131 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id
        from raffle_activity where activity_id = ?; ::: [101]
24-09-03.20:14:52.407 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            tree_id,
            rule_value
        from rule_tree_node
        where rule_key = 'rule_lock' and tree_id in
         (  
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         )
24-09-03.20:14:52.407 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:14:52.408 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            tree_id,
            rule_value
        from rule_tree_node
        where rule_key = 'rule_lock' and tree_id in
         (  
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         , 
            ?
         ) ::: [tree_lock, tree_lock, tree_lock, tree_lock, tree_lock]
24-09-03.20:14:52.585 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select day_count - day_count_surplus
        from raffle_activity_account_day
        where user_id = ?
          and activity_id = ?
          and `day` = ?;
24-09-03.20:14:52.585 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:14:52.585 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select day_count - day_count_surplus
        from raffle_activity_account_day_0
        where user_id = ?
          and activity_id = ?
          and `day` = ?; ::: [lyt, 101, 2024-09-03]
24-09-03.20:14:52.902 [main            ] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:lyt activityId:101 response: {"code":"0000","data":[{"awardId":100,"awardRuleLockCount":8,"awardTitle":"随机积分","isAwardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":101,"awardRuleLockCount":8,"awardTitle":"10000积分","isAwardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":102,"awardRuleLockCount":8,"awardTitle":"公仔一只","isAwardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":103,"awardRuleLockCount":8,"awardTitle":"台灯一个","isAwardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":104,"awardRuleLockCount":8,"awardTitle":"增加5次抽奖机会","isAwardUnlock":true,"sort":5,"waitUnlockCount":0}],"info":"成功"}
24-09-03.20:14:52.908 [main            ] INFO  RaffleStrategyControllerTest - 请求参数：{"activityId":101,"userId":"lyt"}
24-09-03.20:14:52.911 [main            ] INFO  RaffleStrategyControllerTest - 测试结果：{"code":"0000","data":[{"awardId":100,"awardRuleLockCount":8,"awardTitle":"随机积分","isAwardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":101,"awardRuleLockCount":8,"awardTitle":"10000积分","isAwardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":102,"awardRuleLockCount":8,"awardTitle":"公仔一只","isAwardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":103,"awardRuleLockCount":8,"awardTitle":"台灯一个","isAwardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":104,"awardRuleLockCount":8,"awardTitle":"增加5次抽奖机会","isAwardUnlock":true,"sort":5,"waitUnlockCount":0}],"info":"成功"}
24-09-03.20:14:52.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:14:52.963 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:14:52.963 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:14:53.027 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:14:53.940 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:14:53.942 [SpringApplicationShutdownHook] INFO  SchedulerFactoryBean   - Shutting down Quartz Scheduler
24-09-03.20:14:53.942 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutting down.
24-09-03.20:14:53.942 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:14:53.943 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutdown complete.
24-09-03.20:14:53.945 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:14:53.945 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:14:54.018 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-09-03.20:14:54.027 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-09-03.20:14:54.027 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown initiated...
24-09-03.20:14:54.035 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown completed.
24-09-03.20:34:49.126 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 42060 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-09-03.20:34:49.127 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-09-03.20:34:50.870 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-09-03.20:34:50.877 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-09-03.20:34:50.969 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 0 Redis repository interfaces.
24-09-03.20:34:51.542 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'stringToNoneShardingStrategyConfigurationConverter' of type [org.apache.shardingsphere.spring.boot.converter.StringToNoneShardingStrategyConfigurationConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:34:51.558 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.shardingsphere-org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration' of type [org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:34:51.838 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration' of type [org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$7c0b4d66] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:34:52.802 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-09-03.20:34:53.903 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-09-03.20:34:53.917 [main            ] INFO  HikariDataSource       - HikariPool-2 - Starting...
24-09-03.20:34:54.156 [main            ] INFO  HikariDataSource       - HikariPool-2 - Start completed.
24-09-03.20:34:56.567 [main            ] INFO  Version                - Redisson 3.23.4
24-09-03.20:34:57.136 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:34:57.288 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:35:00.205 [main            ] INFO  StdSchedulerFactory    - Using default implementation for ThreadExecutor
24-09-03.20:35:00.221 [main            ] INFO  SchedulerSignalerImpl  - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
24-09-03.20:35:00.221 [main            ] INFO  QuartzScheduler        - Quartz Scheduler v.2.3.2 created.
24-09-03.20:35:00.223 [main            ] INFO  RAMJobStore            - RAMJobStore initialized.
24-09-03.20:35:00.223 [main            ] INFO  QuartzScheduler        - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'quartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

24-09-03.20:35:00.223 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler 'quartzScheduler' initialized from an externally provided properties instance.
24-09-03.20:35:00.223 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler version: 2.3.2
24-09-03.20:35:00.223 [main            ] INFO  QuartzScheduler        - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@53a20aab
24-09-03.20:35:00.386 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-09-03.20:35:00.507 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [8.138.41.137:5672]
24-09-03.20:35:00.683 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#78395e28:0/SimpleConnection@4a0b1701 [delegate=amqp://admin@8.138.41.137:5672/, localPort= 50242]
24-09-03.20:35:01.041 [main            ] INFO  SchedulerFactoryBean   - Starting Quartz Scheduler now
24-09-03.20:35:01.042 [main            ] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED started.
24-09-03.20:35:01.062 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 12.462 seconds (JVM running for 13.629)
24-09-03.20:35:01.332 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:101
24-09-03.20:35:02.118 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select sku,
               activity_id,
               activity_count_id,
               stock_count,
               stock_count_surplus
        from raffle_activity_sku where activity_id = ?;
24-09-03.20:35:02.119 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:35:02.119 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select sku,
               activity_id,
               activity_count_id,
               stock_count,
               stock_count_surplus
        from raffle_activity_sku where activity_id = ?; ::: [101]
24-09-03.20:35:02.332 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select id,
               activity_count_id,
               total_count,
               day_count,
               month_count,
               create_time,
               update_time
        from raffle_activity_count where activity_count_id = ?;
24-09-03.20:35:02.332 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:35:02.332 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select id,
               activity_count_id,
               total_count,
               day_count,
               month_count,
               create_time,
               update_time
        from raffle_activity_count where activity_count_id = ?; ::: [101]
24-09-03.20:35:02.437 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select id,
               activity_id,
               activity_name,
               activity_desc,
               begin_date_time,
               end_date_time,
               stock_count,
               stock_count_surplus,
               activity_count_id,
               strategy_id,
               `state`,
               create_time,
               update_time
        from raffle_activity where activity_id = ?;
24-09-03.20:35:02.437 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:35:02.437 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select id,
               activity_id,
               activity_name,
               activity_desc,
               begin_date_time,
               end_date_time,
               stock_count,
               stock_count_surplus,
               activity_count_id,
               strategy_id,
               `state`,
               create_time,
               update_time
        from raffle_activity where activity_id = ?; ::: [101]
24-09-03.20:35:02.489 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id
        from raffle_activity where activity_id = ?;
24-09-03.20:35:02.489 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:35:02.489 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id
        from raffle_activity where activity_id = ?; ::: [101]
24-09-03.20:35:02.556 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort,
               rule_models
        from strategy_award
        where strategy_id = ?
24-09-03.20:35:02.556 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:35:02.556 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort,
               rule_models
        from strategy_award
        where strategy_id = ? ::: [100004]
24-09-03.20:35:02.877 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            id,
            strategy_id,
            strategy_desc,
            rule_models,
            create_time,
            update_time
        from strategy
        where strategy_id = ?
24-09-03.20:35:02.877 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:35:02.877 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            id,
            strategy_id,
            strategy_desc,
            rule_models,
            create_time,
            update_time
        from strategy
        where strategy_id = ? ::: [100004]
24-09-03.20:35:02.919 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:101
24-09-03.20:35:03.100 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-09-03.20:35:03.137 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:35:03.160 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:35:03.160 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:35:03.972 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:35:04.077 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:35:04.079 [SpringApplicationShutdownHook] INFO  SchedulerFactoryBean   - Shutting down Quartz Scheduler
24-09-03.20:35:04.079 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutting down.
24-09-03.20:35:04.079 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:35:04.079 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutdown complete.
24-09-03.20:35:04.081 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:35:04.081 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:35:04.151 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-09-03.20:35:04.159 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-09-03.20:35:04.160 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown initiated...
24-09-03.20:35:04.166 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown completed.
24-09-03.20:36:54.444 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 17776 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-09-03.20:36:54.446 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-09-03.20:36:56.080 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-09-03.20:36:56.085 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-09-03.20:36:56.172 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 0 Redis repository interfaces.
24-09-03.20:36:56.765 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'stringToNoneShardingStrategyConfigurationConverter' of type [org.apache.shardingsphere.spring.boot.converter.StringToNoneShardingStrategyConfigurationConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:36:56.783 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.shardingsphere-org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration' of type [org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:36:57.056 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration' of type [org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$b5a30c43] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:36:57.981 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-09-03.20:36:59.076 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-09-03.20:36:59.088 [main            ] INFO  HikariDataSource       - HikariPool-2 - Starting...
24-09-03.20:36:59.326 [main            ] INFO  HikariDataSource       - HikariPool-2 - Start completed.
24-09-03.20:37:01.566 [main            ] INFO  Version                - Redisson 3.23.4
24-09-03.20:37:02.118 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:37:02.268 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:37:05.123 [main            ] INFO  StdSchedulerFactory    - Using default implementation for ThreadExecutor
24-09-03.20:37:05.137 [main            ] INFO  SchedulerSignalerImpl  - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
24-09-03.20:37:05.138 [main            ] INFO  QuartzScheduler        - Quartz Scheduler v.2.3.2 created.
24-09-03.20:37:05.138 [main            ] INFO  RAMJobStore            - RAMJobStore initialized.
24-09-03.20:37:05.139 [main            ] INFO  QuartzScheduler        - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'quartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

24-09-03.20:37:05.139 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler 'quartzScheduler' initialized from an externally provided properties instance.
24-09-03.20:37:05.139 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler version: 2.3.2
24-09-03.20:37:05.139 [main            ] INFO  QuartzScheduler        - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@7b4e5982
24-09-03.20:37:05.291 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-09-03.20:37:05.401 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [8.138.41.137:5672]
24-09-03.20:37:05.584 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3a5e591b:0/SimpleConnection@1b0e81b3 [delegate=amqp://admin@8.138.41.137:5672/, localPort= 50380]
24-09-03.20:37:05.864 [main            ] INFO  SchedulerFactoryBean   - Starting Quartz Scheduler now
24-09-03.20:37:05.864 [main            ] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED started.
24-09-03.20:37:05.880 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 11.933 seconds (JVM running for 13.17)
24-09-03.20:37:06.127 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:101
24-09-03.20:37:06.912 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select sku,
               activity_id,
               activity_count_id,
               stock_count,
               stock_count_surplus
        from raffle_activity_sku where activity_id = ?;
24-09-03.20:37:06.912 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:37:06.912 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select sku,
               activity_id,
               activity_count_id,
               stock_count,
               stock_count_surplus
        from raffle_activity_sku where activity_id = ?; ::: [101]
24-09-03.20:37:07.106 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select id,
               activity_count_id,
               total_count,
               day_count,
               month_count,
               create_time,
               update_time
        from raffle_activity_count where activity_count_id = ?;
24-09-03.20:37:07.106 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:37:07.106 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select id,
               activity_count_id,
               total_count,
               day_count,
               month_count,
               create_time,
               update_time
        from raffle_activity_count where activity_count_id = ?; ::: [101]
24-09-03.20:37:07.216 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select id,
               activity_id,
               activity_name,
               activity_desc,
               begin_date_time,
               end_date_time,
               stock_count,
               stock_count_surplus,
               activity_count_id,
               strategy_id,
               `state`,
               create_time,
               update_time
        from raffle_activity where activity_id = ?;
24-09-03.20:37:07.216 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:37:07.216 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select id,
               activity_id,
               activity_name,
               activity_desc,
               begin_date_time,
               end_date_time,
               stock_count,
               stock_count_surplus,
               activity_count_id,
               strategy_id,
               `state`,
               create_time,
               update_time
        from raffle_activity where activity_id = ?; ::: [101]
24-09-03.20:37:07.271 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id
        from raffle_activity where activity_id = ?;
24-09-03.20:37:07.271 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:37:07.271 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id
        from raffle_activity where activity_id = ?; ::: [101]
24-09-03.20:37:07.314 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort,
               rule_models
        from strategy_award
        where strategy_id = ?
24-09-03.20:37:07.314 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:37:07.314 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort,
               rule_models
        from strategy_award
        where strategy_id = ? ::: [100004]
24-09-03.20:37:07.607 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            id,
            strategy_id,
            strategy_desc,
            rule_models,
            create_time,
            update_time
        from strategy
        where strategy_id = ?
24-09-03.20:37:07.607 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:37:07.607 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            id,
            strategy_id,
            strategy_desc,
            rule_models,
            create_time,
            update_time
        from strategy
        where strategy_id = ? ::: [100004]
24-09-03.20:37:07.650 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:101
24-09-03.20:37:07.828 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-09-03.20:37:07.861 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:37:07.879 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:37:07.879 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:37:07.900 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:37:08.812 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:37:08.814 [SpringApplicationShutdownHook] INFO  SchedulerFactoryBean   - Shutting down Quartz Scheduler
24-09-03.20:37:08.814 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutting down.
24-09-03.20:37:08.814 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:37:08.814 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutdown complete.
24-09-03.20:37:08.816 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:37:08.816 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:37:08.888 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-09-03.20:37:08.899 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-09-03.20:37:08.899 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown initiated...
24-09-03.20:37:08.906 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown completed.
24-09-03.20:38:05.867 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 34204 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-09-03.20:38:05.868 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-09-03.20:38:07.659 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-09-03.20:38:07.668 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-09-03.20:38:07.760 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 0 Redis repository interfaces.
24-09-03.20:38:08.440 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'stringToNoneShardingStrategyConfigurationConverter' of type [org.apache.shardingsphere.spring.boot.converter.StringToNoneShardingStrategyConfigurationConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:38:08.456 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.shardingsphere-org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration' of type [org.apache.shardingsphere.spring.boot.prop.SpringBootPropertiesConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:38:08.744 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration' of type [org.apache.shardingsphere.spring.boot.ShardingSphereAutoConfiguration$$EnhancerBySpringCGLIB$$fa1a9ebd] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-09-03.20:38:09.753 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-09-03.20:38:12.466 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-09-03.20:38:12.481 [main            ] INFO  HikariDataSource       - HikariPool-2 - Starting...
24-09-03.20:38:12.727 [main            ] INFO  HikariDataSource       - HikariPool-2 - Start completed.
24-09-03.20:38:15.179 [main            ] INFO  Version                - Redisson 3.23.4
24-09-03.20:38:15.884 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:38:16.047 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-09-03.20:38:19.349 [main            ] INFO  StdSchedulerFactory    - Using default implementation for ThreadExecutor
24-09-03.20:38:19.387 [main            ] INFO  SchedulerSignalerImpl  - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
24-09-03.20:38:19.387 [main            ] INFO  QuartzScheduler        - Quartz Scheduler v.2.3.2 created.
24-09-03.20:38:19.388 [main            ] INFO  RAMJobStore            - RAMJobStore initialized.
24-09-03.20:38:19.388 [main            ] INFO  QuartzScheduler        - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'quartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

24-09-03.20:38:19.389 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler 'quartzScheduler' initialized from an externally provided properties instance.
24-09-03.20:38:19.389 [main            ] INFO  StdSchedulerFactory    - Quartz scheduler version: 2.3.2
24-09-03.20:38:19.389 [main            ] INFO  QuartzScheduler        - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@717c00f9
24-09-03.20:38:19.553 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-09-03.20:38:19.668 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [8.138.41.137:5672]
24-09-03.20:38:19.853 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#48ebcce5:0/SimpleConnection@3af4b14e [delegate=amqp://admin@8.138.41.137:5672/, localPort= 50490]
24-09-03.20:38:20.195 [main            ] INFO  SchedulerFactoryBean   - Starting Quartz Scheduler now
24-09-03.20:38:20.195 [main            ] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED started.
24-09-03.20:38:20.212 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 14.882 seconds (JVM running for 16.188)
24-09-03.20:38:20.536 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:lyt activityId:101
24-09-03.20:38:21.641 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select activity_name,
               strategy_id,
               order_id,
               order_time,
               order_state
        from user_raffle_order where activity_id = ? and user_id = ? and order_state = 'create'
24-09-03.20:38:21.641 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:21.641 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select activity_name,
               strategy_id,
               order_id,
               order_time,
               order_state
        from user_raffle_order_0 where activity_id = ? and user_id = ? and order_state = 'create' ::: [101, lyt]
24-09-03.20:38:21.772 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select total_count,
               total_count_surplus,
               day_count,
               day_count_surplus,
               month_count,
               month_count_surplus
        from raffle_activity_account where user_id = ? and activity_id = ?
24-09-03.20:38:21.772 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:21.772 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select total_count,
               total_count_surplus,
               day_count,
               day_count_surplus,
               month_count,
               month_count_surplus
        from raffle_activity_account_0 where user_id = ? and activity_id = ? ::: [lyt, 101]
24-09-03.20:38:21.813 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select user_id,
               activity_id,
               `month`,
               month_count,
               month_count_surplus
        from raffle_activity_account_month
        where user_id = ?
          and activity_id = ?
          and `month` = ?;
24-09-03.20:38:21.813 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:21.813 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select user_id,
               activity_id,
               `month`,
               month_count,
               month_count_surplus
        from raffle_activity_account_month_0
        where user_id = ?
          and activity_id = ?
          and `month` = ?; ::: [lyt, 101, 2024-09]
24-09-03.20:38:21.845 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select user_id,
               activity_id,
               `day`,
               day_count,
               day_count_surplus
        from raffle_activity_account_day
        where user_id = ?
          and activity_id = ?
          and `day` = ?;
24-09-03.20:38:21.845 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:21.845 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select user_id,
               activity_id,
               `day`,
               day_count,
               day_count_surplus
        from raffle_activity_account_day_0
        where user_id = ?
          and activity_id = ?
          and `day` = ?; ::: [lyt, 101, 2024-09-03]
24-09-03.20:38:21.958 [main            ] INFO  SnowflakeUUIDUtils     - 12位数字的UUID:183094844766
24-09-03.20:38:21.998 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: update raffle_activity_account set total_count_surplus = total_count_surplus - 1,
                                           day_count_surplus = day_count_surplus - 1,
                                           month_count_surplus = month_count_surplus - 1, update_time = now()
        where user_id = ? and activity_id = ?
        and total_count_surplus > 0 and day_count_surplus > 0 and month_count_surplus > 0;
24-09-03.20:38:21.999 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLUpdateStatement(orderBy=Optional.empty, limit=Optional.empty)
24-09-03.20:38:21.999 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: update raffle_activity_account_0 set total_count_surplus = total_count_surplus - 1,
                                           day_count_surplus = day_count_surplus - 1,
                                           month_count_surplus = month_count_surplus - 1, update_time = now()
        where user_id = ? and activity_id = ?
        and total_count_surplus > 0 and day_count_surplus > 0 and month_count_surplus > 0; ::: [lyt, 101]
24-09-03.20:38:22.059 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: update raffle_activity_account_month
        set month_count_surplus = month_count_surplus - 1,update_time = now()
        where user_id = ? and activity_id = ?
        and `month` = ? and month_count_surplus > 0
24-09-03.20:38:22.059 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLUpdateStatement(orderBy=Optional.empty, limit=Optional.empty)
24-09-03.20:38:22.059 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: update raffle_activity_account_month_0
        set month_count_surplus = month_count_surplus - 1,update_time = now()
        where user_id = ? and activity_id = ?
        and `month` = ? and month_count_surplus > 0 ::: [lyt, 101, 2024-09]
24-09-03.20:38:22.105 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: update raffle_activity_account_day
        set day_count_surplus = day_count_surplus - 1, update_time = now()
        where user_id = ? and activity_id = ? and day = ? and day_count_surplus > 0
24-09-03.20:38:22.105 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLUpdateStatement(orderBy=Optional.empty, limit=Optional.empty)
24-09-03.20:38:22.105 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: update raffle_activity_account_day_0
        set day_count_surplus = day_count_surplus - 1, update_time = now()
        where user_id = ? and activity_id = ? and day = ? and day_count_surplus > 0 ::: [lyt, 101, 2024-09-03]
24-09-03.20:38:22.158 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: insert into user_raffle_order(
            user_id, activity_id, activity_name, strategy_id, order_id, order_time, order_state, create_time, update_time
        )
        values(
                  ?, ?, ?, ?, ?, ?, ?, now(), now()
              )
24-09-03.20:38:22.158 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLInsertStatement(setAssignment=Optional.empty, onDuplicateKeyColumns=Optional.empty)
24-09-03.20:38:22.158 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: insert into user_raffle_order_0(
            user_id, activity_id, activity_name, strategy_id, order_id, order_time, order_state, create_time, update_time
        , id)
        values(?, ?, ?, ?, ?, ?, ?, now(), now(), ?) ::: [lyt, 101, 测试, 100004, 183094844766, 2024-09-03 20:38:20.541, create, 1037828105039228928]
24-09-03.20:38:22.242 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:lyt activityId:101 orderId:183094844766
24-09-03.20:38:22.356 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: lyt strategyId: 100004 ruleModel: rule_default awardId: 100
24-09-03.20:38:22.365 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select rule_models
        from strategy_award
        where strategy_id = ?
          and award_id = ?
24-09-03.20:38:22.365 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.365 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select rule_models
        from strategy_award
        where strategy_id = ?
          and award_id = ? ::: [100004, 100]
24-09-03.20:38:22.446 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            tree_id,
            tree_name,
            tree_desc,
            tree_root_rule_key
        from rule_tree
        where tree_id = ?;
24-09-03.20:38:22.446 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.446 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            tree_id,
            tree_name,
            tree_desc,
            tree_root_rule_key
        from rule_tree
        where tree_id = ?; ::: [tree_lock]
24-09-03.20:38:22.466 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            tree_id,
            rule_key,
            rule_desc,
            rule_value
        from rule_tree_node
        where tree_id = ?;
24-09-03.20:38:22.466 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.467 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            tree_id,
            rule_key,
            rule_desc,
            rule_value
        from rule_tree_node
        where tree_id = ?; ::: [tree_lock]
24-09-03.20:38:22.488 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select
            tree_id,
            rule_node_from,
            rule_node_to,
            rule_limit_type,
            rule_limit_value
        from rule_tree_node_line
        where tree_id = ?;
24-09-03.20:38:22.488 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.488 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select
            tree_id,
            rule_node_from,
            rule_node_to,
            rule_limit_type,
            rule_limit_value
        from rule_tree_node_line
        where tree_id = ?; ::: [tree_lock]
24-09-03.20:38:22.555 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:lyt strategyId:100004 awardId:100
24-09-03.20:38:22.557 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select activity_id
        from raffle_activity where strategy_id = ?;
24-09-03.20:38:22.557 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.557 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select activity_id
        from raffle_activity where strategy_id = ?; ::: [100004]
24-09-03.20:38:22.577 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select user_id,
               activity_id,
               `day`,
               day_count,
               day_count_surplus
        from raffle_activity_account_day
        where user_id = ?
          and activity_id = ?
          and `day` = ?;
24-09-03.20:38:22.577 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.577 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: select user_id,
               activity_id,
               `day`,
               day_count,
               day_count_surplus
        from raffle_activity_account_day_0
        where user_id = ?
          and activity_id = ?
          and `day` = ?; ::: [lyt, 101, 2024-09-03]
24-09-03.20:38:22.598 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-09-03.20:38:22.599 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:lyt strategyId:100004 awardId:100
24-09-03.20:38:22.637 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:lyt strategyId:100004 awardId:100
24-09-03.20:38:22.701 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-09-03.20:38:22.701 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 lyt 100004 100 null
24-09-03.20:38:22.722 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort
        from strategy_award
        where strategy_id = ?
        and award_id = ?
24-09-03.20:38:22.722 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLSelectStatement(limit=Optional.empty, lock=Optional.empty, window=Optional.empty)
24-09-03.20:38:22.722 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: select strategy_id,
               award_id,
               award_title,
               award_subtitle,
               award_count,
               award_count_surplus,
               award_rate,
               sort
        from strategy_award
        where strategy_id = ?
        and award_id = ? ::: [100004, 100]
24-09-03.20:38:22.770 [main            ] INFO  SnowflakeUUIDUtils     - 11位数字的UUID:18309484510
24-09-03.20:38:22.991 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: insert into user_award_record(user_id,
            activity_id,
            strategy_id,
            order_id,
            award_id,
            award_title,
            award_time,
            award_state) values(?,
                                ?,
                                ?,
                                ?,
                                ?,
                                ?,
                                ?,
                                ?);
24-09-03.20:38:22.991 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLInsertStatement(setAssignment=Optional.empty, onDuplicateKeyColumns=Optional.empty)
24-09-03.20:38:22.991 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: insert into user_award_record_0(user_id,
            activity_id,
            strategy_id,
            order_id,
            award_id,
            award_title,
            award_time,
            award_state, id) values(?, ?, ?, ?, ?, ?, ?, ?, ?); ::: [lyt, 101, 100004, 183094844766, 100, 随机积分, 2024-09-03 20:38:22.768, create, 1037828108507918337]
24-09-03.20:38:23.060 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: insert into task(
            topic,
            user_id,
            message,
            message_id,
            state
        ) values (?,
                 ?,
                 ?,
                 ?,
                 ?);
24-09-03.20:38:23.061 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLInsertStatement(setAssignment=Optional.empty, onDuplicateKeyColumns=Optional.empty)
24-09-03.20:38:23.061 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: insert into task(
            topic,
            user_id,
            message,
            message_id,
            state
        , id) values (?, ?, ?, ?, ?, ?); ::: [send_award, lyt, {"data":{"awardId":100,"awardTitle":"随机积分","userId":"lyt"},"id":"18309484510","timeStamp":"2024-09-03 20:38:22.77"}, 18309484510, create, 1037828108793131008]
24-09-03.20:38:23.117 [main            ] INFO  ShardingSphere-SQL     - Logic SQL: update user_raffle_order set order_state = 'used',update_time = now()
                                              where user_id = ? and order_id = ? and order_state = 'create';
24-09-03.20:38:23.117 [main            ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLUpdateStatement(orderBy=Optional.empty, limit=Optional.empty)
24-09-03.20:38:23.117 [main            ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: update user_raffle_order_0 set order_state = 'used',update_time = now()
                                              where user_id = ? and order_id = ? and order_state = 'create'; ::: [lyt, 183094844766]
24-09-03.20:38:23.240 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":101,"userId":"lyt"}
24-09-03.20:38:23.245 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":100,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
24-09-03.20:38:23.261 [pool-7-thread-1 ] INFO  EventPublisher         - 发送 MQ 消息 topic:send_award, message:{"data":{"awardId":100,"awardTitle":"随机积分","userId":"lyt"},"id":"18309484510","timeStamp":"2024-09-03 20:38:22.77"}
24-09-03.20:38:23.264 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Logic SQL: update task set state = 'completed', update_time = now()
        where user_id = ? and message_id = ?;
24-09-03.20:38:23.264 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLUpdateStatement(orderBy=Optional.empty, limit=Optional.empty)
24-09-03.20:38:23.264 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: update task set state = 'completed', update_time = now()
        where user_id = ? and message_id = ?; ::: [lyt, 18309484510]
24-09-03.20:38:23.264 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: update task set state = 'completed', update_time = now()
        where user_id = ? and message_id = ?; ::: [lyt, 18309484510]
24-09-03.20:38:23.271 [pool-7-thread-1 ] ERROR AwardRepository        - 写入中奖记录，发送MQ消息失败 userId:lyt topic:send_award
24-09-03.20:38:23.273 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Logic SQL: update task set state = 'fail', update_time = now()
        where user_id = ? and message_id = ?;
24-09-03.20:38:23.273 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - SQLStatement: MySQLUpdateStatement(orderBy=Optional.empty, limit=Optional.empty)
24-09-03.20:38:23.273 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Actual SQL: ds0 ::: update task set state = 'fail', update_time = now()
        where user_id = ? and message_id = ?; ::: [lyt, 18309484510]
24-09-03.20:38:23.273 [pool-7-thread-1 ] INFO  ShardingSphere-SQL     - Actual SQL: ds1 ::: update task set state = 'fail', update_time = now()
        where user_id = ? and message_id = ?; ::: [lyt, 18309484510]
24-09-03.20:38:23.284 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:38:23.293 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":100,"awardTitle":"随机积分","userId":"lyt"},"id":"18309484510","timeStamp":"2024-09-03 20:38:22.77"}
24-09-03.20:38:23.305 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:38:23.305 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-09-03.20:38:23.329 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:38:24.142 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-09-03.20:38:24.144 [SpringApplicationShutdownHook] INFO  SchedulerFactoryBean   - Shutting down Quartz Scheduler
24-09-03.20:38:24.144 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutting down.
24-09-03.20:38:24.144 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED paused.
24-09-03.20:38:24.145 [SpringApplicationShutdownHook] INFO  QuartzScheduler        - Scheduler quartzScheduler_$_NON_CLUSTERED shutdown complete.
24-09-03.20:38:24.146 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:38:24.147 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-09-03.20:38:24.235 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-09-03.20:38:24.242 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-09-03.20:38:24.242 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown initiated...
24-09-03.20:38:24.249 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-2 - Shutdown completed.
