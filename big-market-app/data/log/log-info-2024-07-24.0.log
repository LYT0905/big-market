24-07-24.21:15:05.578 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 9232 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:15:05.579 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:15:06.597 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:15:06.600 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:15:06.650 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-07-24.21:15:08.177 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:15:08.845 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:15:09.268 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:15:12.033 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:15:12.113 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 7.014 seconds (JVM running for 8.54)
24-07-24.21:15:12.561 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:15:13.842 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:15:23.139 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:15:24.920 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:15:25.007 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重开始 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:15:25.175 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重接管 userId: lyt strategyId: 100001 ruleModel: rule_weight awardId: 102
24-07-24.21:15:25.348 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"lyt"}
24-07-24.21:15:25.351 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":102}
24-07-24.21:15:25.366 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:15:25.581 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:16:06.246 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 15300 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:16:06.248 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:16:07.079 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:16:07.083 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:16:07.129 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 0 Redis repository interfaces.
24-07-24.21:16:08.486 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:16:09.117 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:16:09.494 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:16:12.107 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:16:12.191 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.41 seconds (JVM running for 7.459)
24-07-24.21:16:16.982 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:16:18.268 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:22:55.717 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重开始 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:22:55.755 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:23:02.393 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 1552 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:23:02.394 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:23:03.206 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:23:03.209 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:23:03.247 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
24-07-24.21:23:04.506 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:23:05.085 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:23:05.461 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:23:08.292 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:23:08.368 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.399 seconds (JVM running for 7.547)
24-07-24.21:23:08.731 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:23:09.932 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:26:19.322 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m15s206ms949µs401ns).
24-07-24.21:26:22.324 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:27:07.121 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m7s746ms119µs100ns).
24-07-24.21:27:29.130 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:29:02.004 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单开始 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:30:12.074 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m19s873ms812µs700ns).
24-07-24.21:30:12.086 [redisson-timer-4-1] ERROR PingConnectionHandler  - Unable to send PING command over channel: [id: 0x942f03d8, L:/192.168.43.65:61741 - R:8.138.41.137/8.138.41.137:16379]
org.redisson.client.RedisTimeoutException: Command execution timeout for command: (PING), params: [], Redis client: [addr=redis://8.138.41.137:16379]
	at org.redisson.client.RedisConnection.lambda$async$0(RedisConnection.java:256)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-07-24.21:30:12.093 [redisson-timer-4-1] ERROR PingConnectionHandler  - Unable to send PING command over channel: [id: 0x86529f43, L:/192.168.43.65:61742 - R:8.138.41.137/8.138.41.137:16379]
org.redisson.client.RedisTimeoutException: Command execution timeout for command: (PING), params: [], Redis client: [addr=redis://8.138.41.137:16379]
	at org.redisson.client.RedisConnection.lambda$async$0(RedisConnection.java:256)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-07-24.21:30:12.105 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:30:18.882 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 12304 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:30:18.884 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:30:19.773 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:30:19.776 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:30:19.818 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-07-24.21:30:21.162 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:30:21.785 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:30:22.180 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:30:24.986 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:30:25.078 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.657 seconds (JVM running for 7.818)
24-07-24.21:30:25.420 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:30:26.727 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:30:29.395 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:30:30.755 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:30:43.437 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单开始 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:31:02.042 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单放行 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:31:02.043 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重开始 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:31:02.085 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:31:02.153 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:31:02.163 [main            ] WARN  ProxyConnection        - HikariPool-1 - Connection com.mysql.cj.jdbc.ConnectionImpl@44181746 marked as broken because of SQLSTATE(08S01), ErrorCode(0)
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet successfully received from the server was 57 milliseconds ago. The last packet sent successfully to the server was 110 milliseconds ago.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:64)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	at com.sun.proxy.$Proxy94.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy97.queryStrategyRuleValue(Unknown Source)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository.queryStrategyRuleValue(StrategyRepository.java:184)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository.queryStrategyRuleValue(StrategyRepository.java:194)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$47613a41.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$4062e0f0.queryStrategyRuleValue(<generated>)
	at com.big.market.infrastructure.domain.strategy.service.rule.chain.impl.RuleWeightLogicChain.logic(RuleWeightLogicChain.java:41)
	at com.big.market.infrastructure.domain.strategy.service.rule.chain.impl.RuleBlackListLogicChain.logic(RuleBlackListLogicChain.java:48)
	at com.big.market.infrastructure.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:40)
	at com.big.market.infrastructure.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:50)
	at com.big.market.infrastructure.domain.test.RaffleStrategyTest.test_performRaffle(RaffleStrategyTest.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet successfully received from the server was 57 milliseconds ago. The last packet sent successfully to the server was 110 milliseconds ago.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:544)
	at com.mysql.cj.protocol.a.NativeProtocol.checkErrorMessage(NativeProtocol.java:708)
	at com.mysql.cj.protocol.a.NativeProtocol.sendCommand(NativeProtocol.java:647)
	at com.mysql.cj.protocol.a.NativeProtocol.sendQueryPacket(NativeProtocol.java:946)
	at com.mysql.cj.NativeSession.execSQL(NativeSession.java:1075)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:930)
	... 75 common frames omitted
Caused by: java.net.SocketException: socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at sun.security.ssl.InputRecord.readFully(InputRecord.java:465)
	at sun.security.ssl.InputRecord.readV3Record(InputRecord.java:593)
	at sun.security.ssl.InputRecord.read(InputRecord.java:532)
	at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)
	at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:940)
	at sun.security.ssl.AppInputStream.read(AppInputStream.java:105)
	at java.io.FilterInputStream.read(FilterInputStream.java:133)
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:64)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.TimeTrackingPacketReader.readHeader(TimeTrackingPacketReader.java:52)
	at com.mysql.cj.protocol.a.TimeTrackingPacketReader.readHeader(TimeTrackingPacketReader.java:41)
	at com.mysql.cj.protocol.a.MultiPacketReader.readHeader(MultiPacketReader.java:54)
	at com.mysql.cj.protocol.a.MultiPacketReader.readHeader(MultiPacketReader.java:44)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:538)
	... 80 common frames omitted
24-07-24.21:31:02.215 [main            ] WARN  SQLErrorCodesFactory   - Error while extracting database name
org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:363)
	at org.springframework.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes(SQLErrorCodesFactory.java:235)
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.lambda$setDataSource$0(SQLErrorCodeSQLExceptionTranslator.java:140)
	at org.springframework.util.function.SingletonSupplier.get(SingletonSupplier.java:97)
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:141)
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.<init>(SQLErrorCodeSQLExceptionTranslator.java:102)
	at org.mybatis.spring.MyBatisExceptionTranslator.lambda$new$0(MyBatisExceptionTranslator.java:55)
	at org.mybatis.spring.MyBatisExceptionTranslator.initExceptionTranslator(MyBatisExceptionTranslator.java:106)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy94.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy97.queryStrategyRuleValue(Unknown Source)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository.queryStrategyRuleValue(StrategyRepository.java:184)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository.queryStrategyRuleValue(StrategyRepository.java:194)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$47613a41.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$4062e0f0.queryStrategyRuleValue(<generated>)
	at com.big.market.infrastructure.domain.strategy.service.rule.chain.impl.RuleWeightLogicChain.logic(RuleWeightLogicChain.java:41)
	at com.big.market.infrastructure.domain.strategy.service.rule.chain.impl.RuleBlackListLogicChain.logic(RuleBlackListLogicChain.java:48)
	at com.big.market.infrastructure.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:40)
	at com.big.market.infrastructure.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:50)
	at com.big.market.infrastructure.domain.test.RaffleStrategyTest.test_performRaffle(RaffleStrategyTest.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:337)
	... 66 common frames omitted
Caused by: java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:96)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 67 common frames omitted
24-07-24.21:31:02.216 [main            ] WARN  SQLErrorCodesFactory   - Error while extracting database name
org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:363)
	at org.springframework.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes(SQLErrorCodesFactory.java:235)
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.lambda$setDataSource$0(SQLErrorCodeSQLExceptionTranslator.java:140)
	at org.springframework.util.function.SingletonSupplier.get(SingletonSupplier.java:97)
	at org.springframework.util.function.SupplierUtils.resolve(SupplierUtils.java:40)
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.getSqlErrorCodes(SQLErrorCodeSQLExceptionTranslator.java:171)
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:193)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy94.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy97.queryStrategyRuleValue(Unknown Source)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository.queryStrategyRuleValue(StrategyRepository.java:184)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository.queryStrategyRuleValue(StrategyRepository.java:194)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$47613a41.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.big.market.infrastructure.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$4062e0f0.queryStrategyRuleValue(<generated>)
	at com.big.market.infrastructure.domain.strategy.service.rule.chain.impl.RuleWeightLogicChain.logic(RuleWeightLogicChain.java:41)
	at com.big.market.infrastructure.domain.strategy.service.rule.chain.impl.RuleBlackListLogicChain.logic(RuleBlackListLogicChain.java:48)
	at com.big.market.infrastructure.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:40)
	at com.big.market.infrastructure.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:50)
	at com.big.market.infrastructure.domain.test.RaffleStrategyTest.test_performRaffle(RaffleStrategyTest.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:337)
	... 66 common frames omitted
Caused by: java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:96)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 67 common frames omitted
24-07-24.21:31:06.679 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 4864 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:31:06.681 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:31:07.546 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:31:07.550 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:31:07.593 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 0 Redis repository interfaces.
24-07-24.21:31:08.965 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:31:09.582 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:31:09.961 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:31:12.533 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:31:12.604 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.383 seconds (JVM running for 7.629)
24-07-24.21:31:12.959 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:31:14.352 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:31:17.339 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:31:21.103 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:31:29.642 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单开始 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:31:40.892 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单放行 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:31:50.335 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重开始 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:32:25.080 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:32:45.523 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:32:45.856 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:33:35.042 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 21580 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:33:35.043 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:33:35.962 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:33:35.966 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:33:36.011 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 0 Redis repository interfaces.
24-07-24.21:33:37.315 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:33:37.940 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:33:38.342 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:33:41.018 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:33:41.100 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.508 seconds (JVM running for 7.667)
24-07-24.21:33:41.665 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:33:41.873 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:33:47.363 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单开始 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:33:47.399 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:33:48.594 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:33:48.681 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单放行 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:33:50.428 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重开始 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:33:50.532 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:34:39.161 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=48s733ms206µs100ns).
24-07-24.21:34:39.215 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:34:39.734 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:34:52.704 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 23820 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:34:52.705 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:34:53.587 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:34:53.591 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:34:53.630 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-07-24.21:34:54.988 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:34:55.596 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:34:56.061 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:34:58.934 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:34:59.022 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.754 seconds (JVM running for 7.843)
24-07-24.21:34:59.391 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:35:00.583 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:35:18.615 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-24.21:35:19.123 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:35:19.320 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:35:19.519 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:35:23.761 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单开始 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:35:23.940 [main            ] INFO  RuleBlackListLogicChain - 抽奖责任链-黑名单放行 userId: lyt strategyId: 100001 ruleModel: rule_blacklist
24-07-24.21:35:24.574 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重开始 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:35:24.684 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: lyt strategyId: 100001 ruleModel: rule_weight
24-07-24.21:38:23.181 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=51s713ms975µs700ns).
24-07-24.21:38:46.250 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"lyt"}
24-07-24.21:38:48.452 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":101}
24-07-24.21:38:51.562 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:38:51.570 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:39:02.974 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 2640 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:39:02.975 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:39:03.784 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:39:03.787 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:39:03.825 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
24-07-24.21:39:05.075 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:39:05.659 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:39:06.033 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:39:08.534 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:39:08.606 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.047 seconds (JVM running for 7.065)
24-07-24.21:39:17.509 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-24.21:39:17.709 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:39:17.921 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:39:18.129 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:45:40.262 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 13636 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:45:40.263 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:45:41.122 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:45:41.125 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:45:41.162 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-07-24.21:45:42.415 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:45:42.979 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:45:43.377 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:45:45.760 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:45:45.843 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 5.996 seconds (JVM running for 7.009)
24-07-24.21:45:56.535 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-24.21:45:56.719 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:45:56.919 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:45:57.164 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:46:56.466 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:46:58.916 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:48:28.125 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=55s745ms584µs200ns).
24-07-24.21:48:28.130 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-24.21:48:28.134 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-24.21:48:28.136 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-24.21:48:35.549 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 lyt 100004 101 1,100
24-07-24.21:48:37.220 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100004,"userId":"lyt"}
24-07-24.21:48:37.228 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-24.21:48:39.929 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:48:40.352 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:48:47.711 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 8712 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:48:47.712 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:48:48.526 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:48:48.529 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:48:48.573 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-07-24.21:48:49.868 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:48:50.459 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:48:50.865 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:48:53.392 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:48:53.484 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 6.176 seconds (JVM running for 7.181)
24-07-24.21:49:02.916 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-24.21:49:03.120 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:49:03.320 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:49:03.530 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:49:10.002 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:49:11.175 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:50:06.022 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=47s290ms436µs900ns).
24-07-24.21:50:45.109 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=46s541ms921µs600ns).
24-07-24.21:51:34.281 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-24.21:51:57.710 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m12s601ms971µs).
24-07-24.21:52:16.254 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-24.21:52:42.969 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=45s257ms892µs700ns).
24-07-24.21:52:12.854 [redisson-timer-4-1] ERROR PingConnectionHandler  - Unable to send PING command over channel: [id: 0x406c66eb, L:/192.168.43.65:62732 - R:8.138.41.137/8.138.41.137:16379]
org.redisson.client.RedisTimeoutException: Command execution timeout for command: (PING), params: [], Redis client: [addr=redis://8.138.41.137:16379]
	at org.redisson.client.RedisConnection.lambda$async$0(RedisConnection.java:256)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-07-24.21:53:18.406 [redisson-timer-4-1] ERROR PingConnectionHandler  - Unable to send PING command over channel: [id: 0x9aeff9dc, L:/192.168.43.65:62734 - R:8.138.41.137/8.138.41.137:16379]
org.redisson.client.RedisTimeoutException: Command execution timeout for command: (PING), params: [], Redis client: [addr=redis://8.138.41.137:16379]
	at org.redisson.client.RedisConnection.lambda$async$0(RedisConnection.java:256)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-07-24.21:53:18.407 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-24.21:53:46.494 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 lyt 100004 101 1,100
24-07-24.21:53:51.445 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100004,"userId":"lyt"}
24-07-24.21:53:51.447 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-24.21:53:51.460 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:53:51.555 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-24.21:54:17.151 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_171 on LAPTOP-6UTBSJGB with PID 23864 (started by 27132 in C:\Users\27132\Java\big-market\big-market-app)
24-07-24.21:54:17.152 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-24.21:54:17.947 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-24.21:54:17.950 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-24.21:54:17.987 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
24-07-24.21:54:19.203 [main            ] INFO  Version                - Redisson 3.23.4
24-07-24.21:54:19.781 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:54:20.211 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 8.138.41.137/8.138.41.137:16379
24-07-24.21:54:22.638 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-24.21:54:22.716 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 5.99 seconds (JVM running for 7.01)
24-07-24.21:54:32.829 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-24.21:54:33.031 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:54:33.247 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:54:33.443 [main            ] INFO  RaffleStrategyTest     - 测试结果：false
24-07-24.21:54:33.640 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-24.21:54:34.836 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-24.21:54:34.984 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-24.21:54:34.986 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-24.21:54:34.986 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-24.21:54:34.986 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 lyt 100004 101 1,100
24-07-24.21:54:35.131 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100004,"userId":"lyt"}
24-07-24.21:54:35.133 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-24.21:54:35.147 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-24.21:54:35.537 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
